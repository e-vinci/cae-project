---
title: CI
description: Int√©gration continue
date: 20/01/2025
---

<InternalPageMenu>
  <PathViewer>
    <PathViewerItem to="/"> CAE </PathViewerItem>
    <PathViewerItem to="/quality"> Qualit√© </PathViewerItem>
    <PathViewerItem selected> Int√©gration Continue </PathViewerItem>
  </PathViewer>
  <InternalPageMenuItem> Comment g√©rer la qualit√© de l'API ? </InternalPageMenuItem>
  <InternalPageMenuItem> Comment r√©sumer le style guide de Google ? </InternalPageMenuItem>
  <InternalPageMenuItem> Comment mettre en place le Checkstyle dans IntelliJ ? </InternalPageMenuItem>
  <InternalPageMenuItem> Comment mettre en place le PMD ? </InternalPageMenuItem>
  <InternalPageMenuItem> Comment g√©rer les tests unitaires avec Mockito ? </InternalPageMenuItem>
</InternalPageMenu>



# <InternalPageTitle> Comment g√©rer l'int√©gration continue de code au sein de Gitlab ? </InternalPageTitle>

Nous allons dans un premier temps d√©finir ce qu'est l'int√©gration continue, puis nous verrons comment la mettre en place au sein de Gitlab.

## D√©finition de l'int√©gration continue

L'int√©gration continue est une pratique de d√©veloppement logiciel qui consiste √† **automatiser l'int√©gration du code produit par les d√©veloppeurs dans un r√©f√©rentiel partag√©**. L'objectif est de d√©tecter et de corriger les probl√®mes d'int√©gration le plus t√¥t possible, afin de garantir une qualit√© de code constante et de faciliter le d√©ploiement continu.

## Mise en place de l'int√©gration continue avec Gitlab

Gitlab propose des fonctionnalit√©s int√©gr√©es pour mettre en place l'int√©gration continue de code. Voici les √©tapes √† suivre pour configurer l'int√©gration continue dans Gitlab :
- Prot√©ger la branche principale : pour √©viter les modifications directes sur la branche principale, il est recommand√© de prot√©ger la branche `main` ou `master` et 
d'exiger des *merge requests* pour int√©grer les modifications.
- Cr√©er un fichier `.gitlab-ci.yml` : ce fichier contient les instructions pour ex√©cuter les tests, le build et le d√©ploiement du code. Il d√©finit les *jobs* et les *stages* √† ex√©cuter lors de l'int√©gration continue.

Les param√®tres pour configurer la protection de la branche principale, la gestion des MR et des builds sont accessibles dans les param√®tres du projet, ou dans les param√®tres du groupe pour appliquer des r√®gles √† plusieurs projets.

Nous indiquons ici les param√®tres que nous voulons que vous utilisiez sur votre projet.
Nous vous demandons de prot√©ger la branche principale, de configurer les *merge requests* pour qu'elles soient valid√©es par un autre membre de l'√©quipe avant d'√™tre fusionn√©es, et de configurer un pipeline d'int√©gration continue qui ex√©cute les tests unitaires et v√©rifie la qualit√© du code.

Pour les √©tudiants Vinci, nous avons tent√© de param√©trer tout cela au niveau du groupe `cae-project`. Si tout va bien, lorsque vous cr√©erez un projet au sein de ce groupe, ces param√®tres seront d√©j√† configur√©s et vous n'aurez donc rien √† faire.

## Protection de la branche principale

Pour prot√©ger la branche principale, vous pouvez suivre les √©tapes suivantes :
1. Acc√©dez aux param√®tres du projet dans Gitlab (`Settings`).
2. Cliquez sur `Repository` dans le menu de gauche.
3. Cliquez sur `Default branch`.
4. La branche principale est `main` par d√©faut (il n'y a rien √† changer)
5. Assurez que l'option `Protected` est activ√©e.
6. Cochez les options :
   - Allowed to push : `No one` 
   - Allowed to merge : `Developers + Maintainers`.
7. Cliquez sur `Save changes`.

Ainsi, les d√©veloppeurs ne pourront pas pousser directement sur la branche principale, mais devront passer par des *merge requests*.


## Meilleure gestion des MR
1. Acc√©dez aux param√®tres du projet dans Gitlab (`Settings`).
2. Cliquez sur `General` dans le menu de gauche.
3. Cliquez sur `Merge requests`.
4. Cochez l'option `Pipelines must succeed
Merge requests can't be merged if the latest pipeline did not succeed or is still running.`.
5. Cochez l'option `All threads must be resolved`.
6. Cliquez sur `Save changes`.


## Cr√©ation de votre compte sous Gitlab

**üëâ CONSIGNE** : 
1. Cr√©ez un compte sur Gitlab en vous rendant sur https://gitlab.com/users/sign_up
2. Vous devez indiquer vos vraies informations, notamment votre nom et pr√©nom, et votre adresse email **`@student.vinci.be`**! Les √©tudiants et les enseignants doivent pouvoir vous retrouver avec vos informations officielles ! L'email doit aussi √™tre officiel, sinon vous ne pourrez pas obtenir les services gratuits offerts par Gitlab Education.
3. Votre username doit √™tre : `vinci-prenom-nom` (sans accent, sans espace, sans majuscule, sans caract√®res sp√©ciaux)



## Cr√©ation de votre projet sous Gitlab

**üëâ CONSIGNE** : Cr√©ez un nouveau projet sur Gitlab nomm√© `cae-xy` et suivez les √©tapes pour prot√©ger la branche principale et configurer les *merge requests*.

1. Rendez-vous sur https://gitlab.com/e-vinci/cae-projects/2025-cae-projects
2. Cliquez sur `New project` en haut √† droite.
3. S√©lectionnez `Create blank project`.
4. Nommez votre projet `cae-xy` (remplacez `xy` par votre num√©ro de groupe).
5. Assurez vous que le projet est `Private`.
5. Cliquez sur `Create project`.
 
**üëâ CONSIGNE** : Veuillez ajouter tous vos enseignants √† votre projet ainsi que les membres de votre √©quipe.
1. TBD

Veuillez cloner votre projet sur votre machine locale.

Pour l'ajout du boilerplate de votre API Spring, veuillez commencer avec ce projet de base :
https://github.com/e-vinci/cae-exercices-demo

**üëâ CONSIGNE** : Tapez cette commande au sein du repository associ√© √† votre projet. Votre Api doit se trouver dans le r√©pertoire **`/api`** de votre repository :

```bash
git clone https://github.com/e-vinci/cae-exercices-demo api
```